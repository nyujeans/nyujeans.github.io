<html>
<style>
body {
	background-color: #3c3c3c;
  background-image: url("https://images.neopets.com/backgrounds/meerca_day3.gif");
	font-family: times;
	font-size: 14px;
	color: #000;
	text-align: center;
	margin-top: 50px;
	margin-left: 150px;
	margin-right: 150px;
	margin-bottom: 50px;
	padding: 3px;
}
.c1 {
	background-color: #ffffff;
	padding: 5px;
	width: 70%;
	margin: 0 auto;
}
h1{
  color: #164863;
  font-style: italic;
  font-size: 60px;
  margin: 5px;
}
h2{
  color: #9BBEC8;
  font-style: italic;
  font-size: 20px;
  margin: 5px;
}
b{
  color: #363062;
}
i{
  color: #435585;
}
a{
  color: #818FB4;
}
a:hover{
  color: #B6D0E2;
}
</style>

<body>
<form>
<div class="c1">

<h1>PAH GENERATOR</h1>

<h2>how it works</h2>
<p>
<li>Paste <i>one</i> listing into first box</li>
<li>Check any of the boxes if there's a custom (FFQ/PP/NP)</li>
<li>Hit generate</li>
<li>Paste into pot page</li>
<li>Rinse and repeat for the other listings on the board</li>
<br>
There are two text boxes below, which will generate two types of code for your use:
<li>Stacked listings: the listings will be formatted as a stack, i.e. on top of each other</li>
<li>Side-by-side listings: if there's two listings, the listings will be formatted side-by-side</li>
The stacked listings use far less "code", while the side-by-side deals with a bit more.
<br>Choose whatever is easiest for you at the moment!
<br><br>
If there are any questions, please feel free to reach out through NM @ age109!
</p>

<center>
<table style="width:100%">
<tr>
	<td>
		<center>
<h2>enter listing here</h2>
<textarea id="inputw1" style="height: 200px; width: 300px; font-size:10pt;" type="text" placeholder="Listing:

Petname - Color species
Petname - Color species

@username
"></textarea>
</center>
</td>
<td>
<b>For customs:</b>
<br>Check the <i>first box</i> if the <i>first listing</i> is the custom.
<br>Check the <i>second box</i> if the <i>second listing</i> is the custom.
<br>If it's a <i>single custom listing</i>, check the <i>first box</i>.
<br>
<label for="myCheck"><i><b>1st listing is a custom</b></i>:</label><input type="checkbox" id="checkboxOne">
<br>
<label for="myCheck"><i><b>2nd listing is a custom</b></i>:</label><input type="checkbox" id="checkboxTwo">
<p></p>
<input type="button" value="Generate listing!" onclick="pushListing()">
</td>
</tr>
</table>
</center>
<p></p>
<h2>listing codes here</h2>
<center>
<table style="width:100%">
  <tr>
    <td><center><b>Stacked listings</b><br><textarea id="list" style="height: 150px; width: 300px; font-size:10pt;" type="text" placeholder="Stacked code here"></textarea></center></td>
    <td><center><b>Side-by-side listings</b><br><textarea id="list_1" style="height: 150px; width: 300px; font-size:10pt;" type="text" placeholder="Side-by-side code here"></textarea></center></td>
  </tr>
</table>
</center>
<p></p>
<h2>listing previews</h2>
<center>
<table style="width:40%">
<tr>
	<td>
		<center>
<img src="https://images.neopets.com/backgrounds/meerca_day2.gif" style="width: 150px; height: 150px;" id="imgOne">
<br>
<div id="pi1">
Petname #1
</div>
</center>
</td>
<br>
<td>
	<center>
<img src="https://images.neopets.com/backgrounds/meerca_day2.gif" style="width: 150px; height: 150px;" id="imgTwo">
<br>
<div id="pi2">
Petname #2
</div>
</center>
</td>
</tr>
</table>
</center>
<p></p>
<h2>pah resources</h2>
<p>
Looking for PAH resources? Check out these links below!
</p><li>PAH rules: <a href="https://www.neopets.com/~krouth">/~Krouth</a></li>
<li>PAH how-to and etiquette: <a href="https://www.neopets.com/~Frelp">/~Frelp</a></li>
<li>PAH variations: <a href="https://www.neopets.com/~Breadin">/~Breadin</a></li>
<li>PAH resources: <a href="https://www.neopets.com/~Bydz">/~Bydz</a> + <a href="https://www.neopets.com/~Definitive">/~Definitive</a></li>
<li>PAH pot page templates: <a href="https://www.neopets.com/~Tewtz">/~Tewtz</a></li>
</p>
<h2>credits</h2>
<p>
<li>Generator + /~Tewtz by Arielle/<a href="https://www.neopets.com/userlookup.phtml?user=age109">@age109</a>.
</p>
</div>
</form>
<script>

// button??
// https://stackoverflow.com/questions/49579088/add-item-to-list-on-button-click-js

// fcns:
// .split() -> string into array
function pushListing(list){
    var w1 = document.getElementById('inputw1').value;

    // split listing into one whole array
    var w1_str = w1.toString().split(/\r?\n|\r|\n/g).filter(x => !/^\s*$/.test(x))

		//console.log(w1_str)

    if (w1_str.length == 4) { // two listings

			// refresh images
			if (document.getElementById("imgOne").src != "https://images.neopets.com/backgrounds/meerca_day2.gif"){
				document.getElementById("imgOne").src = "https://images.neopets.com/backgrounds/meerca_day2.gif";
			}

			if (document.getElementById("imgTwo").src != "https://images.neopets.com/backgrounds/meerca_day2.gif"){
				document.getElementById("imgTwo").src = "https://images.neopets.com/backgrounds/meerca_day2.gif";
			}

			// refresh listing names
			document.getElementById("pi1").innerHTML = "Petname #1";
			document.getElementById("pi2").innerHTML = "Petname #2";

      var first_listing = w1_str[1].split(" ") // split the first listing
      var second_listing = w1_str[2].split(" ") // split the second listing

      // grab the username
      var username = w1_str[3]

      // turn the listings into urls
      var fl_url = listingToURL(first_listing)
      var sl_url = listingToURL(second_listing)

      // final formatting function -> returns all the formatting as one giant string array
      var final_format = formatToCSS_2(username, fl_url, sl_url, first_listing, second_listing).join("")

			// get the side-by-side formatting
			var final_format_side = formatToCSS_2Side(username, fl_url, sl_url, first_listing, second_listing).join("")

      // uncheck checkbox
      document.getElementById("checkboxOne").checked = false;
      document.getElementById("checkboxTwo").checked = false;

      // code box
      var textbox_left = document.getElementById('list');
      textbox_left.value = final_format;

			// if we hve a double listing, show the side-by-side formatting
			var textbox_right = document.getElementById('list_1');
	    textbox_right.value = final_format_side;

			// for image previews
			var img_url1 = 'https://pets.neopets.com/cpn/PETNAME/1/4.png'
			img_url1 = img_url1.replace('PETNAME', first_listing[0])

			var img_url2 = 'https://pets.neopets.com/cpn/PETNAME/1/4.png'
			img_url2 = img_url2.replace('PETNAME', second_listing[0])

			if (document.getElementById("imgOne").src == "https://images.neopets.com/backgrounds/meerca_day2.gif"){
				document.getElementById("imgOne").src = img_url1;
			} else {
					document.getElementById("imgOne").src = "https://images.neopets.com/backgrounds/meerca_day2.gif";
			}

			if (document.getElementById("imgTwo").src == "https://images.neopets.com/backgrounds/meerca_day2.gif"){
				document.getElementById("imgTwo").src = img_url2;
			} else {
					document.getElementById("imgTwo").src = "https://images.neopets.com/backgrounds/meerca_day2.gif";
			}

			// for name previews
			document.getElementById("pi1").innerHTML = first_listing[0];
			document.getElementById("pi2").innerHTML = second_listing[0];

    }
    else if(w1_str.length == 3){ // one listing

			// refresh images
			if (document.getElementById("imgOne").src != "https://images.neopets.com/backgrounds/meerca_day2.gif"){
				document.getElementById("imgOne").src = "https://images.neopets.com/backgrounds/meerca_day2.gif";
			}

			if (document.getElementById("imgTwo").src != "https://images.neopets.com/backgrounds/meerca_day2.gif"){
				document.getElementById("imgTwo").src = "https://images.neopets.com/backgrounds/meerca_day2.gif";
			}

			// refresh listing names
			document.getElementById("pi1").innerHTML = "Petname #1";
			document.getElementById("pi2").innerHTML = "Petname #2";

			// refresh side-by-side, if any
			document.getElementById("list_1").value = "";

      var first_listing = w1_str[1].split(" ") // split the first listing

      // grab the username
      var username = w1_str[2]

      // turn the listings into urls
      var fl_url = listingToURL(first_listing)

      // final formatting function -> returns all the formatting as one giant string array
      var final_format = formatToCSS_1(username, fl_url, first_listing).join("")

      // uncheck checkbox
      document.getElementById("checkboxOne").checked = false;

			// for image previews
			var img_url1 = 'https://pets.neopets.com/cpn/PETNAME/1/4.png'
			img_url1 = img_url1.replace('PETNAME', first_listing[0])


			if (document.getElementById("imgOne").src == "https://images.neopets.com/backgrounds/meerca_day2.gif"){
				document.getElementById("imgOne").src = img_url1;
			} else {
					document.getElementById("imgOne").src = "https://images.neopets.com/backgrounds/meerca_day2.gif";
			}

      // code box
      var textbox = document.getElementById('list');
      textbox.value = final_format;

			// for name previews
			document.getElementById("pi1").innerHTML = first_listing[0];

    }
    else { // probably an end line, remove it
      console.log("it is not good")
    }
}

// take listing and turn it into the formatting we have for url
// url for pictures
// <a href="/petlookup.phtml?pet=PETNAME"><img src="//pets.neopets.com/cpn/PETNAME/1/4.png"></a>
function listingToURL(url){

  // an array that holds both urls
  var final_urls = []


	// remove any weird charas from the pet name so it doesn't mess up the link business
	// this is awful BUT basically if the end thing is not a letter and it's not a number
	// AND it's not an underscore, remove it
	if(/\d/.test(url[0].charAt(url[0].length-1)) == false && /[a-z]/i.test(url[0].charAt(url[0].length-1)) == false
	&& url[0][url[0].length-1] != "_"){
		url[0] = url[0].slice(0, -1)
	}


  // for the link
  var url1 = '/petlookup.phtml?pet=PETNAME'
  url1 = url1.replace('PETNAME', url[0])
  final_urls.push(url1)

  // for the img
  var url2 = '//pets.neopets.com/cpn/PETNAME/1/4.png'
  url2 = url2.replace('PETNAME', url[0])
  final_urls.push(url2)

  return final_urls

}

// for two listings
function formatToCSS_2(username, fl_url, sl_url, fl, sl){

  // final array
  var result = []

  // if the box is checked, check if one of them
  var first = document.getElementById("checkboxOne");
  var second = document.getElementById("checkboxTwo");

  var flu1, slu1;

  // first, second, or both
  if (first.checked == true && second.checked == false){ // only first
    flu1 = "<img src=\"https://images.neopets.com/backgrounds/meerca_day2.gif\" style=\"width: 150px; height: 150px;\">"
    slu1 = "<a href=\"" + sl_url[0] + "\"><img src=\"" + sl_url[1] + "\"></a>"
  }
  else if (first.checked == false && second.checked == true){ // only second
    flu1 = "<a href=\"" + fl_url[0] + "\"><img src=\"" + fl_url[1] + "\"></a>"
    slu1 = "<img src=\"https://images.neopets.com/backgrounds/meerca_day2.gif\" style=\"width: 150px; height: 150px;\">"
  }
  else if (first.checked == true && second.checked == true){ // both
    flu1 = "<img src=\"https://images.neopets.com/backgrounds/meerca_day2.gif\" style=\"width: 150px; height: 150px;\">"
    slu1 = "<img src=\"https://images.neopets.com/backgrounds/meerca_day2.gif\" style=\"width: 150px; height: 150px;\">"
  }
  else { // neither is checked, both are not customs
    flu1 = "<a href=\"" + fl_url[0] + "\"><img src=\"" + fl_url[1] + "\"></a>"
    slu1 = "<a href=\"" + sl_url[0] + "\"><img src=\"" + sl_url[1] + "\"></a>"
  }

  // add first url + a break
  result.push(flu1)
  result.push("<br>")

  // add first listing + notes
  // since it's an array i have to do it this wonky way ugh idk im bald or whatever
  let fl_str = ""
  for(let i = 0; i < fl.length; i++){
    fl_str += fl[i] + " "
  }
  result.push(fl_str)
  result.push("<br><br>")

  // add second url + a break
  result.push(slu1)
  result.push("<br>")

  // add second listing + notes
  // since it's an array i have to do it this wonky way ugh idk im bald or whatever
  let sl_str = ""
  for(let i = 0; i < sl.length; i++){
    sl_str += sl[i] + " "
  }
  result.push(sl_str)

  // add username to the bottom
  let username_css = "<h2 style=\"border-bottom: 1px solid; margin-bottom: 25px; padding-bottom:5px;\">" + username + "</h2>"
  result.push(username_css)

  return result

}


// for two listings + side-by-side
function formatToCSS_2Side(username, fl_url, sl_url, fl, sl){

  // final array
  var result = []

  // if the box is checked, check if one of them
  var first = document.getElementById("checkboxOne");
  var second = document.getElementById("checkboxTwo");

  var flu1, slu1;

	// first half of div madness
	result.push("<div style=\"width: 100%; overflow: hidden;\"><div style=\"width: 50%; float: left;\"><div style=\"padding-left: 15%;\">")

  // first, second, or both
  if (first.checked == true && second.checked == false){ // only first
    flu1 = "<img src=\"https://images.neopets.com/backgrounds/meerca_day2.gif\" style=\"width: 150px; height: 150px;\">"
    slu1 = "<a href=\"" + sl_url[0] + "\"><img src=\"" + sl_url[1] + "\"></a>"
  }
  else if (first.checked == false && second.checked == true){ // only second
    flu1 = "<a href=\"" + fl_url[0] + "\"><img src=\"" + fl_url[1] + "\"></a>"
    slu1 = "<img src=\"https://images.neopets.com/backgrounds/meerca_day2.gif\" style=\"width: 150px; height: 150px;\">"
  }
  else if (first.checked == true && second.checked == true){ // both
    flu1 = "<img src=\"https://images.neopets.com/backgrounds/meerca_day2.gif\" style=\"width: 150px; height: 150px;\">"
    slu1 = "<img src=\"https://images.neopets.com/backgrounds/meerca_day2.gif\" style=\"width: 150px; height: 150px;\">"
  }
  else { // neither is checked, both are not customs
    flu1 = "<a href=\"" + fl_url[0] + "\"><img src=\"" + fl_url[1] + "\"></a>"
    slu1 = "<a href=\"" + sl_url[0] + "\"><img src=\"" + sl_url[1] + "\"></a>"
  }

  // add first url + a break
  result.push(flu1)
  result.push("<br>")

  // add first listing + notes
  // since it's an array i have to do it this wonky way ugh idk im bald or whatever
  let fl_str = ""
  for(let i = 0; i < fl.length; i++){
    fl_str += fl[i] + " "
  }
  result.push(fl_str)

	// second half of div madness
  result.push("</div></div><div style=\"margin-left: 50%;\"><div style=\"padding-right: 15%;\">")

  // add second url + a break
  result.push(slu1)
  result.push("<br>")

  // add second listing + notes
  // since it's an array i have to do it this wonky way ugh idk im bald or whatever
  let sl_str = ""
  for(let i = 0; i < sl.length; i++){
    sl_str += sl[i] + " "
  }
  result.push(sl_str)

	// last of div madness
	result.push("</div></div></div>")

  // add username to the bottom
  let username_css = "<h2 style=\"border-bottom: 1px solid; margin-bottom: 25px; padding-bottom:5px;\">" + username + "</h2>"
  result.push(username_css)

  return result

}

// for one listing
function formatToCSS_1(username, fl_url, fl){

  // final array
  var result = []

  var flu1;

  var first = document.getElementById("checkboxOne");

  // check if listing is just a custom
  if(first.checked == true){
    flu1 = "<img src=\"https://images.neopets.com/backgrounds/meerca_day2.gif\" style=\"width: 150px; height: 150px;\">"
  }
  else {
    flu1 = "<a href=\"" + fl_url[0] + "\"><img src=\"" + fl_url[1] + "\"></a>"
  }

  // add first url + a break
  result.push(flu1)
  result.push("<br>")

  // add first listing + notes
  // since it's an array i have to do it this wonky way ugh idk im bald or whatever
  let fl_str = ""
  for(let i = 0; i < fl.length; i++){
    fl_str += fl[i] + " "
  }
  result.push(fl_str)

	// add username to the bottom
  let username_css = "<h2 style=\"border-bottom: 1px solid; margin-bottom: 25px; padding-bottom:5px;\">" + username + "</h2>"
  result.push(username_css)

  return result

}



</script>

</body>
</html>
